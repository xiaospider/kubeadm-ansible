---

- name: Install GCC
  yum:
    name: gcc
    state: present

- name: Create a tmp python binary  directory if it does not exist
  file:
    path: /tmp/python27
    state: directory
    mode: '0755'

- name: Download Python 2.7
  unarchive:
    src: https://www.python.org/ftp/python/2.7.10/Python-2.7.10.tgz
    dest: /tmp/python27
    remote_src: yes

- name: configure python 2.7.10
  command: ./configure
  args:
    chdir: "/tmp/python27/Python-2.7.10"

- name: make and install python 2.7.10
  become: yes
  shell: make && make install
  args:
    chdir: "/tmp/python27/Python-2.7.10"

- name: recycle python install file
  command: rm -rf /tmp/python27

- name: Install pip
  become: yes
  yum:
    name: 
      - python-pip 
      - python-wheel
    state: present
- name: Install kubespray python depencies
  become: yes
  pip:
    name:
      - netaddr
      - Jinja2
